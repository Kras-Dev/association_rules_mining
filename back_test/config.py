"""
–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–∞.
"""

# ==============================================================================
# üí∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–ø–∏—Ç–∞–ª–æ–º –∏ —Ä–∏—Å–∫–∞–º–∏ (Risk & Money Management)
# ==============================================================================
INITIAL_CAPITAL = 85.0          # –°—Ç–∞—Ä—Ç–æ–≤—ã–π –∫–∞–ø–∏—Ç–∞–ª –¥–ª—è –∫–∞–∂–¥–æ–π —Å–∏–º—É–ª—è—Ü–∏–∏.
RISK_PER_TRADE = 0.01           # –†–∏—Å–∫ –Ω–∞ –æ–¥–Ω—É —Å–¥–µ–ª–∫—É –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö –æ—Ç –∫–∞–ø–∏—Ç–∞–ª–∞ (1%).

# ==============================================================================
# üõ°Ô∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∑–∏—Ü–∏–π –∏ –≤—ã—Ö–æ–¥–∞
# ==============================================================================
MAX_PYRAMID_LEVELS = 3          # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–π –∫ –ø–æ–∑–∏—Ü–∏–∏ (–ø–∏—Ä–∞–º–∏–¥–∏–Ω–≥).
                                # –ë–∞–∑–æ–≤—ã–π –≤—Ö–æ–¥ (1) + 2 –¥–æ–±–∞–≤–ª–µ–Ω–∏—è = —É—Ä–æ–≤–µ–Ω—å 3
SL_ATR_MULTIPLIER = 2.0         # –ú–Ω–æ–∂–∏—Ç–µ–ª—å ATR –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ Stop Loss (–¥–∏—Å—Ç–∞–Ω—Ü–∏—è SL = 2 * ATR).
SL_CAP_PCT = 0.025              # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π Stop Loss –≤ % –æ—Ç —Ü–µ–Ω—ã –≤—Ö–æ–¥–∞ (1.5% –ª–∏–º–∏—Ç).
TP_ATR_MULTIPLIER = 2.0         # –ú–Ω–æ–∂–∏—Ç–µ–ª—å ATR –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ Take Profit (–¥–∏—Å—Ç–∞–Ω—Ü–∏—è TP = 2 * ATR).

# ==============================================================================
# –†–µ–∂–∏–º—ã –≤—ã—Ö–æ–¥–∞ (EXIT_MODES)
# ==============================================================================
EXIT_MODES = {
    "SIGNAL_TO_SIGNAL": "–î–µ—Ä–∂–∏–º –æ—Ç —Å–∏–≥–Ω–∞–ª–∞ –¥–æ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–≥–æ",
    "ONE_CANDLE": "–í—Ö–æ–¥–∏–º ‚Üí –¥–µ—Ä–∂–∏–º 1 —Å–≤–µ—á—É ‚Üí –≤—ã—Ö–æ–¥–∏–º",
    "ATR_TP": "TP=2*ATR, SL=–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π"
}

# ==============================================================================
# –§–∏–ª—å—Ç—Ä—ã –ø—Ä–∞–≤–∏–ª (Mining Filters)
# ==============================================================================
MIN_CONFIDENCE = 0.70           # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (confidence) –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ç–æ—Ä–≥–æ–≤–ª–µ.
MIN_RULES = 10                  # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∞–≤–∏–ª –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±—ç–∫—Ç–µ—Å—Ç–∞.
MIN_SIGNALS = 5                 # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º –ø–µ—Ä–∏–æ–¥–µ.

# ==============================================================================
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–∞
# ==============================================================================

# –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Ä–∏—Å–∫–∞, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –¥–ª—è —Ç–∏–ø–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ (–∞–∫—Ü–∏–∏ vs —Ñ–æ—Ä–µ–∫—Å)
SL_MULTIPLIER = {
    '#': 2.0, #1.9,                   # –î–ª—è –∞–∫—Ü–∏–π (—Å–∏–º–≤–æ–ª—ã –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å #)
    'rfd': 2.0# 1.9                  # –î–ª—è —Ñ–æ—Ä–µ–∫—Å (—Å–∏–º–≤–æ–ª—ã –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –Ω–∞ rfd)
}

TEST_SYMBOLS = [
    "GBPUSDrfd", "EURUSDrfd", "#SBER", "#ROSN", "USDCADrfd", "#NVTK",
    "USDJPYrfd", "#MOEX", "USDCHFrfd", "#LKOH", "NZDUSDrfd", "#GAZP",
    "#PHOR", "AUDUSDrfd", "USDRUBrfd", "#GMKN", "#MTSS", "#VTBR", "#T",
    "#MGNT", "#CHMF", "#TATN", "#PLZL", "EURRUBrfd", "USDCNYrfd",
    "CNYRUBrfd", "#ALRS", "XAGUSDrfd", "XAUUSDrfd"
]

TEST_TIMEFRAMES = ["D1", "H4", "H1", "M30", "M15"]

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–µ—á–µ–π, –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞ (–¥–ª—è –æ–±—É—á–µ–Ω–∏—è + —Ç–µ—Å—Ç–∞)
CANDLES_BY_TF = {
    'M15': 20000,  # ~4 –º–µ—Å—è—Ü–∞
    'M30': 16000,
    'H1':  12000,  # ~1.5 –≥–æ–¥–∞
    'H4':  6000,   # ~6 –ª–µ—Ç
    'D1':  3000    # ~12 –ª–µ—Ç
}

def get_candles(tf: str) -> int:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–µ—á–µ–π –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞.

    Args:
        tf (str): –¢–∞–π–º—Ñ—Ä–µ–π–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'H1').

    Returns:
        int: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–µ—á–µ–π.
    """
    # –ï—Å–ª–∏ —Ç–∞–π–º—Ñ—Ä–µ–π–º –Ω–µ –Ω–∞–π–¥–µ–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –±–æ–ª—å—à–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    return CANDLES_BY_TF.get(tf, 35000)